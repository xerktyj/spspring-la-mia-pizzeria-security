<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
		integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
	<title>Pizzeria Napoli</title>
</head>

<body>

	<header>
		<div th:replace="fragments/fragments :: navbar_home">
		</div>
	</header>

	<section>
		<div class="container mt-5">
			<div class="row">
				<div class=" col-lg-12 mt-1">
					<div class="col-12 mb-4	d-flex justify-content-center">
						<h1>Aggiugi Pizza</h1>
					</div>
					<form id="Pizza-form" th:object="${pizza}" th:action="${addMode} ? @{/home/pizze/addpizza} : @{/home/pizze/editpizza/{id} (id=${pizza.id})}" method="post">
					<div class="col-12">
						<label for="name"> Name </label>
						<input type="text" id="name" placeholder="name" th:field="*{name}" th:errorClass="is-invalid">
						<div th:if="${#fields.hasErrors('name')}" class="invalid-feedback">
							<ul>
								<li th:each="err : ${#fields.errors('name')}" th:text="${err}"></li>
							</ul>
						</div>
					</div>
					<div class="col-12 mt-4">
						<label for="description"> Descrizione </label>
						<input type="text" id="description" placeholder="descrizione" th:field="*{description}" th:errorClass="is-invalid"><br>
						<div th:if="${#fields.hasErrors('description')}" class="invalid-feedback">
							<ul>
								<li th:each="err : ${#fields.errors('description')}" th:text="${err}"></li>
							</ul>
						</div>
					</div>
					<div class="col-12 mt-4">
						<label for="photo"> Link foto </label>
						<input type="text" id="photo" placeholder="link della foto" th:field="*{photo}"	th:errorClass="is-invalid"><br>
						<div th:if="${#fields.hasErrors('photo')}" class="invalid-feedback">
							<ul>
								<li th:each="err : ${#fields.errors('photo')}" th:text="${err}"></li>
							</ul>
						</div>
					</div>
					<div class="col-12 mt-4">
						<label for="price"> Prezzo </label>
						<input type="text" id="price" placeholder="costo" th:field="*{price}" th:errorClass="is-invalid" ><br>
						<div th:if="${#fields.hasErrors('price')}" class="invalid-feedback">
							<ul>
								<li th:each="err : ${#fields.errors('price')}" th:text="${err}"></li>
							</ul>
						</div>
					</div>
					<div class="col-12 mt-4">
						<ul th:each="ingredienti : ${ingredientsList}" 	>
								<input th:text="${ingredienti.name}" th:value="${ingredienti.id}" th:type="checkbox"  th:field="*{ingredients}"th:unchecked="${ingredienti}"/> 
						</ul>						
					</div>
					<div class="col-12 mt-4">
						<ul>
							<li style="color: red;" th:each="err : ${#fields.allErrors()}" th:text="${err}"></li>
						</ul>
					</div>
					
					<div th:if="${pizza.id == 0}">
						<button class="mt-2" type="submit">Aggiungi</button>
					</div>
					<div th:unless="${pizza.id == 0 }">
						<button class="mt-2" type="submit">Modifica</button>
					</div>
					
						
					  </form>

					</div>
				</div>
			</div>
	</section>


	<script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>

</body>

</html>